<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
    <script type="text/javascript" src="js/qs.js"></script>
    <script type="text/javascript" src="js/easing.js"></script>
    <script type="text/javascript" src="js/words.js"></script>
    <script type="text/javascript" src="js/timer.js"></script>
    <script type="text/javascript" src="js/draw.js"></script>
</head>
    <body style="text-align: center;">

        <div id="change">
            <canvas id="seal" width="900" height="900"></canvas>
        </div>

        <script type="text/javascript">

            const customTimes = {
                short3: {
                    initialDuration: 1000 * 8,
                    totalTime: 1000*60*3,
                    easingFunction: EasingFunctions.easeOutCubic
                },
                short2: {
                    initialDuration: 1000 * 6,
                    totalTime: 1000*60*2,
                    easingFunction: EasingFunctions.easeOutCubic
                },
                long: {
                    initialDuration: 1000 * 10,
                    totalTime: 1000*60*11,
                    easingFunction: EasingFunctions.easeInOutCubic
                }
            };

            window.requestAnimFrame = ( function() {
                return  window.requestAnimationFrame       ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame    ||
                    window.oRequestAnimationFrame      ||
                    window.msRequestAnimationFrame     ||
                    function (callback, element) {
                        window.setTimeout(callback, 1000 / 60);
                    };
            })();

            // do the Google Font Loader stuff....
            WebFont.load({
                google: {
                    families: ['Vollkorn']
                },
                active: function () {
                    $(document).ready(function () {

                        let timingKey = getQueryParams('timing') || 'long';


                        init(words.mem, customTimes[timingKey]);
                        startDrawing();

                    });
                }
            });

            document.body.onkeydown = function(e){
                if(e.keyCode == 32) state.timer.togglePause();
            };
            document.body.onclick = function(e){
                state.timer.togglePause();
            };


            function drawFrame() {
                draw('#seal');
            }

            function startDrawing() {
                requestAnimFrame(startDrawing);
                drawFrame();

                //setInterval(drawFrame, 1000/60);
            }

        </script>

    </body>
</html>
